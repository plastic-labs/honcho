{
  "name": "config_dream_control",
  "description": "Test dream configuration control",
  "workspace_config": {
    "deriver": { "enabled": true },
    "dream": { "enabled": true }
  },
  "steps": [
    {
      "step_type": "create_session",
      "session_id": "session_dream_disabled",
      "config": {
        "dream": { "enabled": false }
      }
    },
    {
      "step_type": "add_messages",
      "session_id": "session_dream_disabled",
      "messages": [
        { "peer_id": "frank", "content": "I wonder what dreams are made of." },
        { "peer_id": "frank", "content": "Do androids dream of electric sheep?" }
      ]
    },
    {
      "step_type": "wait",
      "target": "queue_empty"
    },
    {
      "step_type": "query",
      "target": "get_representation",
      "observer_peer_id": "frank",
      "session_id": "session_dream_disabled",
      "assertions": [
        {
          "assertion_type": "llm_judge",
          "prompt": "Check that the representation is valid. Note: We expect no dream artifacts, but explicit facts should exist.",
          "pass_if": true
        }
      ]
    }
  ]
}

